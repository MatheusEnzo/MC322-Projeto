import javafx.application.Application;
import javafx.geometry.Insets;
import javafx.scene.Scene;
import javafx.scene.control.*;
import javafx.scene.layout.GridPane;
import javafx.stage.FileChooser;
import javafx.stage.Stage;

import java.io.File;

public class WriteReadArquivo extends Application {
    private ArquivoArtigo arquivoArtigo;
    private ArquivoLivro arquivoLivro;
    private ArquivoRevista arquivoRevista;
    private ArquivoMembro arquivoMembro;

    public static void main(String[] args) {
        launch(args);
    }

    @Override
    public void start(Stage primaryStage) {
        arquivoArtigo = new ArquivoArtigo();
        arquivoLivro = new ArquivoLivro();
        arquivoRevista = new ArquivoRevista();
        arquivoMembro = new ArquivoMembro();

        primaryStage.setTitle("WriteReadArquivo");

        GridPane gridPane = new GridPane();
        gridPane.setPadding(new Insets(10));
        gridPane.setVgap(10);
        gridPane.setHgap(10);

        // Botão para selecionar arquivo para leitura
        Button selectFileButton = new Button("Selecionar arquivo para leitura");
        selectFileButton.setOnAction(event -> {
            File file = showFileChooser();

            if (file != null) {
                String filename = file.getName();
                String extension = getFileExtension(filename);

                // Realizar a leitura do arquivo com base na extensão
                switch (extension) {
                    case "csv":
                        if (filename.startsWith("artigo")) {
                            arquivoArtigo.lerArquivo(file);
                        } else if (filename.startsWith("livro")) {
                            arquivoLivro.lerArquivo(file);
                        } else if (filename.startsWith("revista")) {
                            arquivoRevista.lerArquivo(file);
                        } else if (filename.startsWith("membro")) {
                            arquivoMembro.lerArquivo(file);
                        } else {
                            System.out.println("Arquivo inválido.");
                        }
                        break;
                    default:
                        System.out.println("Formato de arquivo não suportado.");
                        break;
                }
            }
        });

        // Botão para selecionar arquivo para gravação
        Button saveFileButton = new Button("Selecionar arquivo para gravação");
        saveFileButton.setOnAction(event -> {
            File file = showFileChooser();

            if (file != null) {
                String filename = file.getName();
                String extension = getFileExtension(filename);

                // Realizar a gravação do arquivo com base na extensão
                switch (extension) {
                    case "csv":
                        if (filename.startsWith("artigo")) {
                            arquivoArtigo.gravarArtigos(file);
                        } else if (filename.startsWith("livro")) {
                            arquivoLivro.gravarLivros(file);
                        } else if (filename.startsWith("revista")) {
                            arquivoRevista.gravarRevistas(file);
                        } else if (filename.startsWith("membro")) {
                            arquivoMembro.gravarMembros(file);
                        } else {
                            System.out.println("Arquivo inválido.");
                        }
                        break;
                    default:
                        System.out.println("Formato de arquivo não suportado.");
                        break;
                }
           
}}}}